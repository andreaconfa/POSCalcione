<!doctype html>
<html lang="it">
<head>
	<link rel="icon" href="/static/favicon.svg" type="image/svg+xml">
	<link rel="alternate icon" href="/favicon.ico" sizes="any">
	<link rel="apple-touch-icon" href="/static/favicon-180.png"> <!-- opzionale -->

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root { --bg:#0b0b0b; --card:#111; --border:#222; --btn:#22c55e; }
    * { box-sizing: border-box; }
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; background:var(--bg); color:#f4f4f4; }
    header { position:sticky; top:0; z-index:40; background:#0c0c0c; border-bottom:1px solid var(--border); }
    header .wrap { display:flex; align-items:center; justify-content:space-between; padding:10px 16px; gap:12px; }
    nav a { color:#ddd; text-decoration:none; padding:6px 10px; border-radius:8px; border:1px solid var(--border); background:#0f0f0f; }
    .container { max-width:1300px; margin:0 auto; padding:16px; }
    .card { background:var(--card); border:1px solid var(--border); border-radius:14px; padding:16px; }
    .grid { display:grid; gap:12px; }
    .btn { display:inline-flex; align-items:center; justify-content:center; padding:12px 14px; border-radius:10px; border:none; background:var(--btn); color:#041205; font-weight:700; font-size:16px; touch-action:manipulation; }
    .btn-ghost { display:inline-flex; align-items:center; justify-content:center; padding:10px 12px; border-radius:10px; border:1px solid var(--border); background:#0f0f0f; color:#ddd; touch-action:manipulation; }
    .tag { display:inline-block; padding:4px 8px; border-radius:999px; background:#1a1a1a; border:1px solid var(--border); color:#ddd; font-size:12px; }
    .touch-btn { width:48px; height:48px; border-radius:12px; border:1px solid var(--border); background:#0f0f0f; color:#fff; font-size:22px; font-weight:700; touch-action:manipulation; }
    img.logo { height:36px; }
    /* Responsive */
    @media (max-width: 980px){
      .container { padding:10px; }
      header .wrap { flex-wrap:wrap; }
      nav a { padding:6px 8px; font-size:14px; }
    }
	  /* schermo pulito: rimuovi qualsiasi contenitore centrale */
	  body.screen-mode header,
	  body.screen-mode .topbar { display: none !important; }

	  body.screen-mode,
	  body.screen-mode html { width:100%; height:100%; overflow:hidden; background:#06080b; }

	  body.screen-mode main,
	  body.screen-mode .container,
	  body.screen-mode .page,
	  body.screen-mode .content,
	  body.screen-mode .wrapper {
		max-width: none !important;
		width: 100% !important;
		margin: 0 !important;
		padding: 0 !important;
		border: 0 !important;
		background: transparent !important;
  }
  </style>
  <script>
    // Fragment refresher (used by KDS/Display)
    window.refreshInto = async function(url, targetId){
      const full = url + (url.includes("?") ? "&" : "?") + "t=" + Date.now();
      try {
        const r = await fetch(full, { cache:"no-store" });
        const html = await r.text();
        const el = document.getElementById(targetId);
        if (el) el.outerHTML = html;
      } catch(e){ console.error("refreshInto failed", e); }
    };
    // WebSocket bus
    (function(){
      try{
        const loc = window.location;
        const ws = new WebSocket((loc.protocol==="https:"?"wss://":"ws://")+loc.host+"/ws");
        ws.onmessage = (ev)=>{ try{ const data = JSON.parse(ev.data); document.dispatchEvent(new CustomEvent("ws-poke",{detail:data})); }catch(e){} };
      }catch(e){}
    })();
  </script>
</head>
<body>
  <header>
    <div class="wrap">
      <div style="display:flex; align-items:center; gap:10px;">
        <img class="logo" src="/static/logo.png" alt="Calcione">
      </div>
      <nav style="display:flex; gap:8px; flex-wrap:wrap;">
        <a href="/">Home</a>
        <a href="/pos">POS</a>
        <a href="/display-menu">Display</a>
        <a href="/kds">KDS</a>
        <a href="/admin">Admin</a>
      </nav>
    </div>
  </header>
  <div class="container">
    {% block content %}{% endblock %}
  </div>
</body>
</html>